pipeline {
  agent {
          kubernetes {
              label 'build-service'
              defaultContainer 'jnlp'
              yaml """
  apiVersion: v1
  kind: Pod
  metadata:
    labels:
      job: build-service
  spec:
    containers:
    - name: maven
      image: maven:3.6.0-jdk-11-slim
      command: ["cat"]
      tty: true
      volumeMounts:
      - name: repository
        mountPath: /root/.m2/repository
    - name: docker
      image: docker:18.09.3
      command: ["cat"]
      tty: true
      volumeMounts:
      - name: docker-sock
        mountPath: /var/run/docker.sock
    volumes:
    - name: repository
      persistentVolumeClaim:
        claimName: repository
    - name: docker-sock
      hostPath:
        path: /var/run/docker.sock
  """
          }
      }
      options {
          skipDefaultCheckout true
      }

  environment {
     Demo = '2'
  }
  stages {
    stage('hello') {
      steps {
        echo 'Hello World'
        sh 'echo "this build number $BUILD_NUMBER with demo $Demo"'
      }
    }

    stage('clean') {
      steps {
        sh ' echo "clean ..." '
      }
    }

    stage('install') {
      steps {
        sh ' echo "install ..." '
      }
    }

    stage('Build') {
      steps {
        sh ' echo "Build ..." '
      }
    }

  }
}